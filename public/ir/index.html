<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>پنل ایران | Elahe</title>
  <link rel="stylesheet" href="/shared/css/common.css">
  <link rel="stylesheet" href="/css/ir-style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <main class="dashboard container">
    <header class="panel-header card">
      <div>
        <h1>پنل مدیریت سرور ایران</h1>
        <p>نمایش وضعیت مصرف منابع، اتصال تانل‌ها و فرمان‌پذیری سرور خارج.</p>
      </div>
      <button id="quick-refresh" class="btn btn-primary">بروزرسانی سریع</button>
    </header>

    <section class="card setup-card">
      <h2>تنظیم اتصال به سرور خارج</h2>
      <form id="endpoint-form" class="endpoint-form">
        <label for="foreign-url">آدرس پنل سرور خارج</label>
        <input id="foreign-url" type="url" required placeholder="https://foreign.example.com">
        <button type="submit" class="btn btn-outline">اتصال</button>
      </form>
      <p class="muted">این آدرس برای دریافت وضعیت و ارسال فرمان به API عمومی سرور خارج استفاده می‌شود.</p>
      <div id="status-message" class="status-message"></div>
    </section>

    <section class="stats-grid">
      <article class="card stat-card">
        <h3>CPU</h3>
        <div id="cpu-value" class="stat-value">--</div>
      </article>
      <article class="card stat-card">
        <h3>RAM</h3>
        <div id="ram-value" class="stat-value">--</div>
      </article>
      <article class="card stat-card">
        <h3>Disk</h3>
        <div id="disk-value" class="stat-value">--</div>
      </article>
      <article class="card stat-card">
        <h3>اتصالات فعال</h3>
        <div id="connections-value" class="stat-value">--</div>
      </article>
    </section>

    <section class="card">
      <div class="section-head">
        <h2>اتصال ایران ↔ خارج</h2>
        <button id="copy-token" class="btn btn-sm btn-outline" disabled>کپی کلید اتصال</button>
      </div>
      <div class="key-grid">
        <div>
          <label>Endpoint</label>
          <code id="iran-endpoint">--</code>
        </div>
        <div>
          <label>وضعیت</label>
          <span id="iran-status" class="badge">نامشخص</span>
        </div>
        <div>
          <label>کلید اتصال ایران</label>
          <code id="iran-key">--</code>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="section-head">
        <h2>وضعیت تانل‌ها</h2>
        <small id="updated-at">آخرین بروزرسانی: --</small>
      </div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>پروتکل</th>
              <th>پورت</th>
              <th>وضعیت</th>
              <th>Latency</th>
            </tr>
          </thead>
          <tbody id="tunnels-body">
            <tr><td colspan="5" class="empty">داده‌ای موجود نیست.</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="card">
      <div class="section-head">
        <h2>فرمان‌پذیری از سرور ایران</h2>
      </div>
      <div class="actions">
        <button data-action="status" class="btn btn-outline action-btn">دریافت وضعیت کامل</button>
        <button data-action="monitor" class="btn btn-primary action-btn">اجرای مانیتورینگ</button>
      </div>
      <pre id="command-result" class="command-result">خروجی فرمان در اینجا نمایش داده می‌شود.</pre>
    </section>
  </main>

  <script src="/js/ir-app.js"></script>
</body>
</html>
